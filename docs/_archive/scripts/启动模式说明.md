# ğŸš€ å¯åŠ¨æ¨¡å¼è¯´æ˜

## ğŸ“‹ ä¸¤ç§éƒ¨ç½²æ¨¡å¼

### 1ï¸âƒ£ å¼€å‘æ¨¡å¼ (dev) - æ¨èç”¨äºæµ‹è¯•

**ç‰¹ç‚¹ï¼š**
- âœ… å‰ç«¯ä½¿ç”¨å¼€å‘æœåŠ¡å™¨ (npm start)
- âœ… æ”¯æŒçƒ­é‡è½½ï¼Œä¿®æ”¹ä»£ç ç«‹å³ç”Ÿæ•ˆ
- âœ… å‰ç«¯è‡ªåŠ¨é€šè¿‡proxyè¿æ¥åç«¯
- âš ï¸ å¯åŠ¨è¾ƒæ…¢ï¼ˆ30-60ç§’ï¼‰
- âš ï¸ å ç”¨å†…å­˜è¾ƒå¤š

**å¯åŠ¨å‘½ä»¤ï¼š**
```bash
./start_all.sh dev
# æˆ–
./start_all.sh  # é»˜è®¤å°±æ˜¯devæ¨¡å¼
```

**è®¿é—®åœ°å€ï¼š**
- å‰ç«¯ï¼šhttp://60.205.251.109:3000
- åç«¯ï¼šhttp://60.205.251.109:8000

---

### 2ï¸âƒ£ ç”Ÿäº§æ¨¡å¼ (prod) - æ¨èç”¨äºæ­£å¼è¿è¡Œ

**ç‰¹ç‚¹ï¼š**
- âœ… å‰ç«¯æ„å»ºä¸ºé™æ€æ–‡ä»¶
- âœ… æ€§èƒ½æœ€ä¼˜ï¼ŒåŠ è½½é€Ÿåº¦å¿«
- âœ… å ç”¨å†…å­˜å°‘
- âœ… é€‚åˆé•¿æœŸè¿è¡Œ
- âš ï¸ éœ€è¦é…ç½®Nginx
- âš ï¸ ä¿®æ”¹ä»£ç éœ€è¦é‡æ–°æ„å»º

**å¯åŠ¨å‘½ä»¤ï¼š**
```bash
./start_all.sh prod
```

**é…ç½®Nginxï¼š**
```bash
sudo cp deploy/configs/nginx-stock-analysis.conf /etc/nginx/sites-available/stock-analysis
sudo ln -s /etc/nginx/sites-available/stock-analysis /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

**è®¿é—®åœ°å€ï¼š**
- ç»Ÿä¸€å…¥å£ï¼šhttp://60.205.251.109/
- åç«¯APIï¼šhttp://60.205.251.109:8000

---

## ğŸ”§ å‰ç«¯è¿æ¥é—®é¢˜è§£å†³

### é—®é¢˜ï¼šå‰ç«¯æ˜¾ç¤º"æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡"

**åŸå› ï¼š** å‰ç«¯çš„APIè¯·æ±‚åœ°å€é…ç½®ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ–¹æ¡ˆ1ï¼šè‡ªåŠ¨ä¿®å¤ï¼ˆæ¨èï¼‰
```bash
chmod +x fix_frontend_proxy.sh
./fix_frontend_proxy.sh
```

#### æ–¹æ¡ˆ2ï¼šæ‰‹åŠ¨ä¿®æ”¹
ç¼–è¾‘ `frontend/package.json`ï¼Œæ·»åŠ ï¼š
```json
{
  "name": "stock-analysis-frontend",
  "version": "0.1.1",
  ...å…¶ä»–é…ç½®...
  "proxy": "http://localhost:8000"
}
```

#### æ–¹æ¡ˆ3ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡
ç¼–è¾‘ `frontend/.env.development`:
```
REACT_APP_API_URL=http://60.205.251.109:8000
```

---

## ğŸ“Š æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§ | å¼€å‘æ¨¡å¼ (dev) | ç”Ÿäº§æ¨¡å¼ (prod) |
|------|---------------|----------------|
| **å¯åŠ¨é€Ÿåº¦** | æ…¢ (30-60ç§’) | å¿« (3ç§’åç«¯+æ„å»ºä¸€æ¬¡) |
| **å†…å­˜å ç”¨** | é«˜ (~300MB) | ä½ (~100MB) |
| **å‰ç«¯æ€§èƒ½** | ä¸€èˆ¬ | ä¼˜ç§€ |
| **çƒ­é‡è½½** | âœ… æ”¯æŒ | âŒ ä¸æ”¯æŒ |
| **é€‚ç”¨åœºæ™¯** | å¼€å‘ã€æµ‹è¯•ã€è°ƒè¯• | ç”Ÿäº§ã€é•¿æœŸè¿è¡Œ |
| **éœ€è¦Nginx** | âŒ ä¸éœ€è¦ | âœ… éœ€è¦ |
| **ç«¯å£** | 3000 + 8000 | 80 (Nginx) |

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### åˆæ¬¡éƒ¨ç½² â†’ ä½¿ç”¨devæ¨¡å¼
```bash
./start_all.sh dev
```
- å¿«é€ŸéªŒè¯åŠŸèƒ½
- è°ƒè¯•é—®é¢˜
- æµ‹è¯•æ•°æ®

### æ­£å¼è¿è¡Œ â†’ ä½¿ç”¨prodæ¨¡å¼
```bash
./start_all.sh prod
# é…ç½®Nginx
```
- æ€§èƒ½æœ€ä¼˜
- å ç”¨èµ„æºå°‘
- ç”¨æˆ·ä½“éªŒå¥½

---

## ğŸ› ï¸ å¸¸è§æ“ä½œ

### åˆ‡æ¢æ¨¡å¼

```bash
# åœæ­¢å½“å‰æœåŠ¡
./stop.sh

# åˆ‡æ¢åˆ°prodæ¨¡å¼
./start_all.sh prod
```

### é‡æ–°æ„å»ºå‰ç«¯ï¼ˆprodæ¨¡å¼ï¼‰

```bash
cd frontend
rm -rf build
npm run build
```

### æŸ¥çœ‹å‰ç«¯æ˜¯å¦æ­£ç¡®è¿æ¥åç«¯

```bash
# å¼€å‘æ¨¡å¼
curl http://localhost:3000

# æ£€æŸ¥proxyé…ç½®
grep proxy frontend/package.json

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
tail -f logs/frontend.log
```

### æµ‹è¯•åç«¯API

```bash
curl http://localhost:8000/api/dates
curl http://60.205.251.109:8000/api/dates
```

---

## ğŸ†˜ æ•…éšœæ’æŸ¥

### devæ¨¡å¼ï¼šå‰ç«¯æ— æ³•è¿æ¥åç«¯

```bash
# 1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
curl http://localhost:8000/api/dates

# 2. æ£€æŸ¥proxyé…ç½®
grep proxy frontend/package.json

# 3. ä¿®å¤proxy
./fix_frontend_proxy.sh

# 4. é‡å¯å‰ç«¯
pkill -f "npm start"
./start_frontend.sh
```

### prodæ¨¡å¼ï¼šNginx 502é”™è¯¯

```bash
# 1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
ps aux | grep uvicorn

# 2. æ£€æŸ¥Nginxé…ç½®
sudo nginx -t

# 3. æŸ¥çœ‹Nginxæ—¥å¿—
sudo tail -f /var/log/nginx/error.log

# 4. é‡å¯æœåŠ¡
./stop.sh
./start_all.sh prod
sudo systemctl restart nginx
```

---

## ğŸ“ å®Œæ•´å¯åŠ¨æµç¨‹

### å¼€å‘æ¨¡å¼å®Œæ•´æµç¨‹

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 2. èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x *.sh

# 3. ä¿®å¤å‰ç«¯é…ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰
./fix_frontend_proxy.sh

# 4. å¯åŠ¨æœåŠ¡
./start_all.sh dev

# 5. ç­‰å¾…å¯åŠ¨ï¼ˆçº¦1åˆ†é’Ÿï¼‰
# 6. è®¿é—® http://60.205.251.109:3000

# 7. æŸ¥çœ‹æ—¥å¿—
tail -f logs/backend.log
tail -f logs/frontend.log

# 8. åœæ­¢æœåŠ¡
./stop.sh
```

### ç”Ÿäº§æ¨¡å¼å®Œæ•´æµç¨‹

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 2. å¯åŠ¨æœåŠ¡ï¼ˆä¼šè‡ªåŠ¨æ„å»ºå‰ç«¯ï¼‰
./start_all.sh prod

# 3. é…ç½®Nginxï¼ˆé¦–æ¬¡éœ€è¦ï¼‰
sudo cp deploy/configs/nginx-stock-analysis.conf /etc/nginx/sites-available/stock-analysis
sudo ln -s /etc/nginx/sites-available/stock-analysis /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx

# 4. è®¿é—® http://60.205.251.109/

# 5. æŸ¥çœ‹æ—¥å¿—
tail -f logs/backend.log
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å¼€å‘è°ƒè¯•** â†’ ä½¿ç”¨devæ¨¡å¼
2. **æ€§èƒ½æµ‹è¯•** â†’ ä½¿ç”¨prodæ¨¡å¼ï¼ˆå…ˆä¸é…Nginxï¼‰
3. **æ­£å¼ä¸Šçº¿** â†’ ä½¿ç”¨prodæ¨¡å¼ + Nginx

---

**ğŸ¯ æ¨èï¼šå…ˆç”¨devæ¨¡å¼æµ‹è¯•ï¼Œç¡®è®¤æ— è¯¯åå†åˆ‡æ¢åˆ°prodæ¨¡å¼**
