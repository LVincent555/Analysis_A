# 排名跳变和稳步上升模块 - 搜索功能说明

## ✨ 新增功能

为**排名跳变**和**稳步上升**两个模块添加了前端快捷搜索功能，方便用户快速查找特定股票。

---

## 🔍 功能特性

### 1. 模糊搜索
- ✅ 支持**股票代码**模糊搜索
- ✅ 支持**股票名称**模糊搜索
- ✅ 不区分大小写
- ✅ 实时过滤结果

### 2. 搜索界面
- 🔎 搜索框位于统计卡片下方
- 🎯 左侧图标提示搜索功能
- ❌ 右侧清除按钮（输入内容后显示）
- 📊 实时显示匹配结果数量

### 3. 搜索逻辑
- 在当前显示的股票列表中搜索
- 如果启用了σ筛选，则在σ筛选后的结果中搜索
- 搜索结果保持原有的排序方式（正序/倒序）

---

## 📖 使用方法

### 排名跳变模块

1. **进入模块**
   - 点击左侧导航"排名跳变"

2. **设置筛选条件**
   - 选择板块类型（主板/全部/北交所）
   - 选择跳变阈值（≥2000名/2500名/3000名/3500名）
   - 可选：启用σ范围筛选

3. **搜索股票**
   - 在搜索框输入股票代码或名称
   - 例如：
     - 输入 `605183` 查找确成股份
     - 输入 `确成` 查找确成股份
     - 输入 `60` 查找所有60开头的股票

4. **查看结果**
   - 搜索框右侧显示匹配数量
   - 表格实时更新显示匹配结果
   - 点击❌按钮清除搜索

### 稳步上升模块

1. **进入模块**
   - 点击左侧导航"稳步上升"

2. **设置筛选条件**
   - 选择板块类型（主板/全部/北交所）
   - 选择分析周期（2天/3天/5天/7天/14天）
   - 选择最小提升幅度（≥100名/500名/1000名/2000名）
   - 可选：启用σ范围筛选

3. **搜索股票**
   - 在搜索框输入股票代码或名称
   - 搜索逻辑同排名跳变模块

4. **查看结果**
   - 搜索框右侧显示匹配数量
   - 表格实时更新显示匹配结果
   - 点击❌按钮清除搜索

---

## 💡 使用示例

### 示例1：查找特定股票是否在列表中

**场景**：想知道"平安银行"（000001）是否在排名跳变列表中

**操作**：
1. 进入排名跳变模块
2. 在搜索框输入 `000001` 或 `平安`
3. 如果找到，会显示"找到 1 只股票"
4. 如果没找到，会显示"找到 0 只股票"

### 示例2：查找某个行业的股票

**场景**：想查看所有名称中包含"科技"的股票

**操作**：
1. 在搜索框输入 `科技`
2. 系统会显示所有名称包含"科技"的股票
3. 例如：永辉科技、网达软件等

### 示例3：查找某个代码段的股票

**场景**：想查看所有60开头的股票

**操作**：
1. 在搜索框输入 `60`
2. 系统会显示所有代码包含"60"的股票
3. 例如：605183、603132、603429等

---

## 🎨 界面说明

### 搜索框样式
```
┌─────────────────────────────────────────────────┐
│ 🔍 搜索股票代码或名称...                    ❌  │
└─────────────────────────────────────────────────┘
   找到 5 只股票
```

### 特点
- **左侧图标**：🔍 搜索图标
- **占位符文本**：提示用户输入内容
- **右侧清除按钮**：❌ 快速清空搜索
- **结果提示**：实时显示匹配数量（橙色/蓝色高亮）

---

## 🔧 技术实现

### 核心代码

```javascript
// 搜索过滤逻辑
const filteredStocks = useMemo(() => {
  if (!data || !data.stocks) return [];
  
  const displayStocks = showSigma ? data.sigma_stocks : data.stocks;
  
  if (!searchQuery.trim()) {
    return displayStocks;
  }
  
  const query = searchQuery.toLowerCase().trim();
  return displayStocks.filter(stock => 
    stock.code.toLowerCase().includes(query) || 
    stock.name.toLowerCase().includes(query)
  );
}, [data, showSigma, searchQuery]);
```

### 性能优化
- ✅ 使用 `useMemo` 缓存过滤结果
- ✅ 只在必要时重新计算（依赖项变化）
- ✅ 前端过滤，无需额外API请求
- ✅ 实时响应，无延迟

---

## 📝 注意事项

1. **搜索范围**
   - 搜索只在当前加载的数据中进行
   - 如果启用了σ筛选，搜索范围是σ筛选后的结果

2. **搜索规则**
   - 模糊匹配，只要包含搜索词即可
   - 不区分大小写
   - 支持部分匹配

3. **清空搜索**
   - 点击❌按钮
   - 或者手动删除所有输入内容

4. **与其他筛选的关系**
   - 搜索与σ筛选可以同时使用
   - 搜索与排序（正序/倒序）可以同时使用
   - 搜索结果会保持当前的排序方式

---

## 🚀 未来改进

可能的功能增强：
- [ ] 支持正则表达式搜索
- [ ] 支持多条件组合搜索
- [ ] 搜索历史记录
- [ ] 搜索结果高亮显示
- [ ] 导出搜索结果

---

## 📞 反馈

如有问题或建议，请及时反馈！

**更新时间**: 2025年11月7日  
**版本**: v1.0
